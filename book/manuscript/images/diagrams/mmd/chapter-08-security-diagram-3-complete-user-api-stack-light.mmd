graph TB
    clients["**Mobile & Web Clients**<br/>MessagePack for mobile, JSON for web **(Ch 5)**"]
    
    gateway["**API Gateway**<br/>• JWT token validation<br/>• Rate limiting<br/>• Request logging"]
    
    api["**User API Service**<br/>Protocol: **JSON-RPC (Ch 6)**<br/>Validation: **JSON Schema (Ch 3)**<br/><br/>Methods:<br/>• **getUserById**(id)<br/>• **updateUser**(id, data)<br/>• **searchUsers**(query, filters)<br/>• **followUser**(followerId, followeeId)<br/>• **exportUsers**(format)"]
    
    db["**PostgreSQL Database**<br/>Storage: **JSONB (Ch 4)**<br/><br/>• 60% storage reduction<br/>• Indexed queries<br/>• 10M users stored"]
    
    clients -->|"**HTTPS + JWT**<br/>Authentication<br/>**(Ch 8)**"| gateway
    gateway --> api
    api --> db
    
    style clients fill:#C8D8E8,stroke:#3a4a5a,stroke-width:2px,color:#2c2c2c
    style gateway fill:#D4E8D4,stroke:#3a5a3a,stroke-width:2px,color:#2c2c2c
    style api fill:#E8D4C0,stroke:#5a4a3a,stroke-width:2px,color:#2c2c2c
    style db fill:#E8C8C8,stroke:#5a3a3a,stroke-width:2px,color:#2c2c2c
