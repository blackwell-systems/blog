flowchart TB
    subgraph services["Microservices (100+)"]
        svc1[Service A<br/>JSON logs]
        svc2[Service B<br/>JSON logs]
        svc3[Service C<br/>JSON logs]
    end
    
    subgraph pipeline["Collection & Processing"]
        filebeat[Filebeat → Tail files]
        kafka[Kafka → logs topic]
        logstash[Logstash → Parse & enrich]
        filter[Filter → Drop debug logs]
    end
    
    subgraph output["Storage & Alerting"]
        elastic[(Elasticsearch → Indexed logs)]
        kibana[Kibana → Dashboards]
        alert[Alert Rules → Error rate > 5%]
        notify[Slack/PagerDuty → Notifications]
    end
    
    services --> filebeat
    filebeat --> kafka
    kafka --> logstash
    logstash --> filter
    filter --> elastic
    elastic --> kibana
    elastic --> alert
    alert -->|Triggered| notify
    
    style services fill:#C8D8E8,stroke:#3a4a5a,color:#2c2c2c
    style pipeline fill:#D4E8D4,stroke:#3a5a3a,color:#2c2c2c
    style output fill:#E8C8C8,stroke:#5a4a3a,color:#2c2c2c
