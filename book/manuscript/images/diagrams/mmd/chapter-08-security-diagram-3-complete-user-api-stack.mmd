graph TB
    clients["**Mobile & Web Clients**<br/>MessagePack for mobile, JSON for web **(Ch 5)**"]
    
    gateway["**API Gateway**<br/>• JWT token validation<br/>• Rate limiting<br/>• Request logging"]
    
    api["**User API Service**<br/>Protocol: **JSON-RPC (Ch 6)**<br/>Validation: **JSON Schema (Ch 3)**<br/><br/>Methods:<br/>• **getUserById**(id)<br/>• **updateUser**(id, data)<br/>• **searchUsers**(query, filters)<br/>• **followUser**(followerId, followeeId)<br/>• **exportUsers**(format)"]
    
    db["**PostgreSQL Database**<br/>Storage: **JSONB (Ch 4)**<br/><br/>• 60% storage reduction<br/>• Indexed queries<br/>• 10M users stored"]
    
    clients -->|"**HTTPS + JWT**<br/>Authentication<br/>**(Ch 8)**"| gateway
    gateway --> api
    api --> db
    
    style clients fill:#3A4A5C,stroke:#6b7280,stroke-width:2px,color:#f0f0f0
    style gateway fill:#3A4C43,stroke:#6b7280,stroke-width:2px,color:#f0f0f0
    style api fill:#4C4538,stroke:#6b7280,stroke-width:2px,color:#f0f0f0
    style db fill:#4C3A3C,stroke:#6b7280,stroke-width:2px,color:#f0f0f0
