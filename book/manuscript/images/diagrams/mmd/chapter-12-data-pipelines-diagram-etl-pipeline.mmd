graph TB
    subgraph extract["**Extract**"]
        api["**API Calls**<br/>Paginated"]
        checkpoint["**Checkpoint**<br/>Save progress"]
        jsonl["**Write JSON Lines**<br/>Streaming"]
    end
    
    subgraph transform["**Transform**"]
        read["**Read JSON Lines**<br/>Line by line"]
        validate["**Validate**<br/>JSON Schema"]
        map["**Map Fields**<br/>jq or custom"]
        filter["**Filter**<br/>Business rules"]
        quarantine[("**Quarantine**<br/>Invalid data")]
    end
    
    subgraph load["**Load**"]
        batch["**Batch Records**<br/>1000s per batch"]
        insert["**Bulk Insert**<br/>Database"]
        verify["**Verify**<br/>Row counts"]
        retry["**Retry**"]
        complete[["**Complete**"]]
    end
    
    api --> checkpoint --> jsonl
    jsonl --> read --> validate
    validate -->|Valid| map
    validate -->|Invalid| quarantine
    map --> filter --> batch
    batch --> insert --> verify
    verify -->|Success| complete
    verify -->|Failure| retry --> batch
    
    style extract fill:#3A4A5C,stroke:#6b7280,color:#f0f0f0
    style transform fill:#3A4C43,stroke:#6b7280,color:#f0f0f0
    style load fill:#4C4538,stroke:#6b7280,color:#f0f0f0
    style quarantine fill:#4C3A3C,stroke:#6b7280,color:#f0f0f0
    style complete fill:#3A4C43,stroke:#6b7280,color:#f0f0f0
