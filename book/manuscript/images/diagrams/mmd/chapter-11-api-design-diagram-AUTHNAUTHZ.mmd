sequenceDiagram
    participant Client
    participant Auth as Auth Server
    participant API
    participant Resource
    
    Note over Client,Auth: Authentication Phase
    Client->>Auth: POST /login<br/>{email, password}
    Auth->>Auth: Verify credentials
    Auth-->>Client: JWT token + refresh token
    
    Note over Client,API: Authorization Phase
    Client->>API: GET /users/123<br/>Authorization: Bearer JWT
    API->>API: Verify JWT signature
    API->>API: Check expiration
    
    alt Token valid
        API->>API: Extract user claims
        API->>Resource: Check permissions
        
        alt Has permission
            Resource-->>API: User data
            API-->>Client: 200 OK + data
        else No permission
            API-->>Client: 403 Forbidden
        end
    else Token invalid
        API-->>Client: 401 Unauthorized
    end
