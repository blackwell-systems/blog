flowchart TB
    subgraph sources["Data Sources"]
        api[REST APIs<br/>JSON responses]
        db[(Database<br/>JSON exports)]
        logs[Application Logs<br/>JSON Lines]
        events[Event Stream<br/>Kafka]
    end
    
    subgraph ingestion["Ingestion Layer"]
        extract[Extract<br/>API clients, CDC]
        validate[Validate<br/>JSON Schema]
        buffer[Buffer<br/>Kafka topics]
    end
    
    subgraph processing["Processing Layer"]
        transform[Transform<br/>jq, custom code]
        enrich[Enrich<br/>Lookups, joins]
        aggregate[Aggregate<br/>Windows, rollups]
    end
    
    subgraph storage["Storage Layer"]
        warehouse[(Data Warehouse<br/>BigQuery/Snowflake)]
        oltp[(OLTP Database<br/>PostgreSQL)]
        cache[(Cache<br/>Redis)]
    end
    
    subgraph errors["Error Handling"]
        dlq[Dead Letter Queue<br/>Failed messages]
        quarantine[(Quarantine<br/>Invalid data)]
    end
    
    subgraph monitoring["Monitoring"]
        metrics[Metrics<br/>Prometheus]
        traces[Traces<br/>OpenTelemetry]
        alerts[Alerts<br/>PagerDuty]
    end
    
    sources --> extract
    extract --> validate
    validate -->|Valid| buffer
    validate -->|Invalid| quarantine
    
    buffer --> processing
    processing --> storage
    processing -->|Failed| dlq
    
    storage --> monitoring
    errors --> monitoring
    
    style sources fill:#3A4A5C,stroke:#6b7280,color:#f0f0f0
    style ingestion fill:#3A4C43,stroke:#6b7280,color:#f0f0f0
    style processing fill:#4C4538,stroke:#6b7280,color:#f0f0f0
    style storage fill:#4C3A3C,stroke:#6b7280,color:#f0f0f0
    style errors fill:#5C3A3A,stroke:#6b7280,color:#f0f0f0
    style monitoring fill:#3A5C4A,stroke:#6b7280,color:#f0f0f0
